<div class="clr-row">
    <div class="clr-col-6">
        <span class="headline">biocatalyst</span>
    </div>
    <div class="clr-col-6 right-column">
        <button class="btn btn-link btn-sm" (click)="newEnzyme()">
            <clr-icon shape="plus"></clr-icon> new biocatalyst
        </button>
    </div>
</div>

<!-- Enzyme Suche -->
<div class="searchbar-container">
    <div class="brenda-search-wrapper">
        <label class="searchbar-label">
            <clr-dropdown>
                <clr-icon shape="search" size="24"></clr-icon>
                <button class="close" aria-label="close" (click)="resetSearch()" *ngIf="closeButton">
                    <clr-icon shape="close" size="24"></clr-icon>
                </button>
                <input class="clr-input searchbar-input" type="text" (ngModelChange)="filterSearchInput($event)" [ngModel]="searchInput" name="searchInput" placeholder="search biocatalyst ..." />
                <ng-template [(clrIfOpen)]="dropdown">
                    <clr-dropdown-menu>
                        <div clrDropdownItem (click)="selectSearchEnzyme(enzyme)" *ngFor="let enzyme of enzymeList">{{enzyme.enzymeName}}</div>
                    </clr-dropdown-menu>
                </ng-template>
            </clr-dropdown>
        </label>
    </div>
</div>

<!-- Enzyme Card -->
<div class="enzyme" *ngFor="let enzyme of getEnzymes()">
    <div class="clr-row">
        <div class="clr-col-12 right-column">
            <button class="btn btn-link btn-sm delete-btn" (click)="deleteEnzyme(enzyme)">
                <clr-icon shape="trash"></clr-icon> delete biocatalyst
            </button>
        </div>
    </div>
    <div class="clr-row">
        <div class="clr-col-12">
            <div class="card">
                <div class="card-block">
                    <div class="card-text">
                        <div class="enzyme-details">
                            <form clrForm>
                                <div class="clr-form-control clr-row">
                                    <div class="clr-control-label clr-col-12 clr-col-md-2">name</div>
                                    <div class="clr-control-container clr-col-md-5 clr-col-12">
                                        <div class="clr-input-wrapper">
                                            <input class="clr-input" type="text" [(ngModel)]="enzyme.name" name="name" />
                                        </div>
                                    </div>
                                    <div class="clr-control-container clr-control-inline clr-col-md-5 clr-col-12">
                                        <clr-radio-wrapper>
                                            <input type="radio" clrRadio name="type" required value="wild type enzyme" [(ngModel)]="enzyme.type" />
                                            <label>wildtype</label>
                                          </clr-radio-wrapper>
                                        <clr-radio-wrapper>
                                            <input type="radio" clrRadio name="type" required value="variant" [(ngModel)]="enzyme.type" />
                                            <label>variant</label>
                                        </clr-radio-wrapper>
                                    </div>
                                </div>
                                <clr-input-container>
                                    <label>organism</label>
                                    <input clrInput type="text" [(ngModel)]="enzyme.organism" name="organism" />
                                </clr-input-container>
                                <clr-textarea-container>
                                    <label>amino acid sequence</label>
                                    <textarea clrTextarea [(ngModel)]="enzyme.sequence" name="sequence"></textarea>
                                </clr-textarea-container>
                                <div class="clr-form-control clr-row">
                                    <div class="clr-control-label clr-col-12 clr-col-md-2">concentration</div>
                                    <div class="clr-control-container clr-col-md-5 clr-col-12">
                                        <div class="clr-input-wrapper">
                                            <input class="clr-input" type="text" [(ngModel)]="enzyme.concentration" name="concentration" />
                                        </div>
                                    </div>
                                    <div class="clr-control-container clr-col-md-5 clr-col-12">
                                        <div class="clr-select-wrapper">
                                              <select class="clr-select" [(ngModel)]="enzyme.unit" name="unit">
                                                <option value="mmol/L">mmol/L</option>
                                                <option value="mmoL/L">mmoL/L</option>
                                                <option value="mg/mL">mg/mL</option>
                                                <option value="mL">mL</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                <clr-input-container>
                                    <label>formulation</label>
                                    <input clrInput type="text" [(ngModel)]="enzyme.formulation" name="formulation" />
                                </clr-input-container>
                                <clr-input-container>
                                    <label>protein concentration method</label>
                                    <input clrInput type="text" [(ngModel)]="enzyme.determination" name="determination" />
                                </clr-input-container>
                                <div class="clr-form-control clr-row" *ngFor="let other of enzyme.others">
                                    <div class="clr-control-container clr-col-12 clr-col-md-2">
                                        <div class="clr-input-wrapper">
                                            <input class="clr-input attribut-label" type="text" placeholder="other attribute" [(ngModel)]="other.key" [ngModelOptions]="{standalone: true}"/>
                                        </div>
                                    </div>
                                    <div class="clr-control-container clr-col-md-10 clr-col-12">
                                        <div class="clr-input-wrapper">
                                            <input class="clr-input" type="text" [(ngModel)]="other.value" [ngModelOptions]="{standalone: true}"/>
                                            <button type="button" class="btn btn-link attribute-button" aria-label="trash" (click)="deleteAttribute(enzyme, other)">
                                                <clr-icon shape="trash" class="is-error"></clr-icon>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </form>
                            <button class="btn btn-link btn-sm" (click)="addAttribute(enzyme)">
                                <clr-icon shape="plus"></clr-icon> add attribute
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="overlay" *ngIf="loading">
    <div class="overlay-wrapper">
        <div class="overlay-spinner">
            <span class="spinner spinner-inverse spinner-lg"></span>
        </div>
    </div>
</div>